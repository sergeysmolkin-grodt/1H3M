
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>H3M Custom Chart for EURUSD on 2025-05-14</title>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; }
        #chartContainer { width: 100%; height: 100%; }
    </style>
</head>
<body>
    <div id="chartContainer"></div>
    <script>
        const chartContainer = document.getElementById('chartContainer');
        const chart = LightweightCharts.createChart(chartContainer, {
            width: chartContainer.clientWidth,
            height: chartContainer.clientHeight,
            layout: {
                backgroundColor: '#ffffff',
                textColor: 'rgba(33, 56, 77, 1)',
            },
            grid: {
                vertLines: {
                    color: 'rgba(197, 203, 206, 0.5)',
                },
                horzLines: {
                    color: 'rgba(197, 203, 206, 0.5)',
                },
            },
            crosshair: {
                mode: LightweightCharts.CrosshairMode.Normal,
            },
            priceScale: {
                borderColor: 'rgba(197, 203, 206, 0.8)',
                precision: 5,
                minMove: 0.00001
            },
            timeScale: {
                borderColor: 'rgba(197, 203, 206, 0.8)',
                timeVisible: true,
                secondsVisible: false,
                // Попробуем более явное форматирование для шкалы времени
                tickMarkFormatter: (time, tickMarkType, locale) => {
                    const d = new Date(time * 1000); 
                    // Для Daily/Weekly/Monthly можно показывать только дату
                    // Для интрадей можно показывать HH:mm
                    // LightweightCharts.TickMarkType.Year = 0, Month = 1, Day = 2, Time = 3, TimeWithSeconds = 4
                    if (tickMarkType === LightweightCharts.TickMarkType.Time) {
                        return d.toLocaleTimeString(locale, { hour: '2-digit', minute: '2-digit' });
                    }
                    return d.toLocaleDateString(locale, { day: 'numeric', month: 'short' });
                },
            },
        });

        const candleSeries = chart.addSeries(LightweightCharts.CandlestickSeries, {
            upColor: 'rgba(34, 139, 34, 0.8)', 
            downColor: 'rgba(255, 69, 0, 0.8)', 
            borderDownColor: 'rgba(255, 69, 0, 1)',
            borderUpColor: 'rgba(34, 139, 34, 1)',
            wickDownColor: 'rgba(255, 69, 0, 1)',
            wickUpColor: 'rgba(34, 139, 34, 1)',
        });

        const candlestickData = [{"time": 1747180800, "open": 1.11859, "high": 1.11862, "low": 1.11859, "close": 1.11862}, {"time": 1747184400, "open": 1.11921, "high": 1.11921, "low": 1.11921, "close": 1.11921}, {"time": 1747188000, "open": 1.11884, "high": 1.11884, "low": 1.11884, "close": 1.11884}, {"time": 1747191600, "open": 1.11888, "high": 1.11888, "low": 1.11888, "close": 1.11888}, {"time": 1747195200, "open": 1.11953, "high": 1.11953, "low": 1.11953, "close": 1.11953}, {"time": 1747198800, "open": 1.11884, "high": 1.11884, "low": 1.11884, "close": 1.11884}, {"time": 1747202400, "open": 1.11864, "high": 1.11864, "low": 1.11864, "close": 1.11864}, {"time": 1747206000, "open": 1.11889, "high": 1.11889, "low": 1.11889, "close": 1.11889}, {"time": 1747209600, "open": 1.12148, "high": 1.12148, "low": 1.12148, "close": 1.12148}, {"time": 1747213200, "open": 1.12394, "high": 1.12394, "low": 1.12394, "close": 1.12394}, {"time": 1747216800, "open": 1.12519, "high": 1.12519, "low": 1.12519, "close": 1.12519}, {"time": 1747220400, "open": 1.12309, "high": 1.12309, "low": 1.12309, "close": 1.12309}, {"time": 1747224000, "open": 1.12174, "high": 1.12174, "low": 1.12174, "close": 1.12174}, {"time": 1747227600, "open": 1.12256, "high": 1.12256, "low": 1.12256, "close": 1.12256}, {"time": 1747231200, "open": 1.122, "high": 1.122, "low": 1.122, "close": 1.122}, {"time": 1747234800, "open": 1.12118, "high": 1.12118, "low": 1.12118, "close": 1.12118}, {"time": 1747238400, "open": 1.12053, "high": 1.12053, "low": 1.12053, "close": 1.12053}, {"time": 1747242000, "open": 1.11888, "high": 1.11888, "low": 1.11888, "close": 1.11888}, {"time": 1747245600, "open": 1.11893, "high": 1.11893, "low": 1.11893, "close": 1.11893}, {"time": 1747249200, "open": 1.11778, "high": 1.11778, "low": 1.11778, "close": 1.11778}, {"time": 1747252800, "open": 1.11672, "high": 1.11672, "low": 1.11672, "close": 1.11672}, {"time": 1747256400, "open": 1.11764, "high": 1.11764, "low": 1.11764, "close": 1.11764}, {"time": 1747260000, "open": 1.11772, "high": 1.11772, "low": 1.11772, "close": 1.11772}, {"time": 1747263600, "open": 1.11829, "high": 1.11829, "low": 1.11829, "close": 1.11829}];
        console.log("Candlestick data being passed to chart:", candlestickData.slice(0,5)); // Отладка в консоли браузера
        candleSeries.setData(candlestickData);
        
        // const markersData = [];
        // if (markersData.length > 0) {
        //     candleSeries.setMarkers(markersData);
        // }

        // const priceLinesData = [];
        // priceLinesData.forEach(line => {
        //     candleSeries.createPriceLine({
        //         price: line.price,
        //         color: line.color || '#000000',
        //         lineWidth: line.lineWidth || 1,
        //         lineStyle: line.lineStyle || LightweightCharts.LineStyle.Solid,
        //         axisLabelVisible: true,
        //         title: line.title || '',
        //     });
        // });

        window.addEventListener('resize', () => {
            chart.applyOptions({ width: chartContainer.clientWidth, height: chartContainer.clientHeight });
        });

        chart.timeScale().fitContent();

    </script>
</body>
</html>
    